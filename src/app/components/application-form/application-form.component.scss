@use '../../../styles/variables' as *;
@use '../../../styles/mixins' as *;

.application-form {
    position: relative;
    background: $color-bg-dark;

    &__container {
        @include container;
        max-width: 800px;
    }

    &__header {
        text-align: center;
        margin-bottom: $spacing-12;
    }

    &__title {
        @include section-title;
    }

    &__subtitle {
        @include section-subtitle;
    }

    // Success state
    &__success {
        @include glass-card;
        padding: $spacing-12;
        text-align: center;
        animation: scaleIn 0.5s $transition-spring forwards;

        &-icon {
            font-size: 4rem;
            margin-bottom: $spacing-6;
        }

        &-title {
            font-family: $font-display;
            font-size: $font-size-2xl;
            color: $color-success;
            margin-bottom: $spacing-4;

            @include md {
                font-size: $font-size-3xl;
            }
        }

        &-text {
            font-size: $font-size-lg;
            color: $color-text-secondary;
            max-width: 480px;
            margin: 0 auto $spacing-8;
        }
    }

    &__reset-btn {
        @include button-outline;
    }
}

.form {
    @include glass-card;
    padding: $spacing-8;

    @include md {
        padding: $spacing-10;
    }

    &__grid {
        display: grid;
        gap: $spacing-6;

        @include md {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    &__field {
        @include flex-col;
        gap: $spacing-2;

        &--full {
            @include md {
                grid-column: span 2;
            }
        }
    }

    &__label {
        font-size: $font-size-sm;
        font-weight: $font-weight-medium;
        color: $color-text-secondary;
    }

    &__input,
    &__select {
        @include input-base;
    }

    &__select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='rgba(255,255,255,0.5)' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right $spacing-4 center;
        padding-right: $spacing-12;
        cursor: pointer;

        option {
            background: $color-bg-dark;
            color: $color-text-primary;
        }
    }

    &__error {
        font-size: $font-size-sm;
        color: $color-error;
    }

    // Checkboxes
    &__checkboxes {
        display: flex;
        flex-wrap: wrap;
        gap: $spacing-4;
    }

    &__checkbox {
        display: flex;
        align-items: center;
        gap: $spacing-2;
        cursor: pointer;
        user-select: none;

        &-input {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;

            &:checked+.form__checkbox-custom {
                background: $color-primary;
                border-color: $color-primary;

                &::after {
                    opacity: 1;
                    transform: scale(1);
                }
            }

            &:focus-visible+.form__checkbox-custom {
                outline: 2px solid $color-primary;
                outline-offset: 2px;
            }
        }

        &-custom {
            width: 22px;
            height: 22px;
            border: 2px solid $color-border-hover;
            border-radius: $radius-sm;
            position: relative;
            transition: all $transition-base;
            flex-shrink: 0;

            &::after {
                content: 'âœ“';
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) scale(0.5);
                color: white;
                font-size: 12px;
                font-weight: bold;
                opacity: 0;
                transition: all $transition-base;
            }
        }

        &-label {
            font-size: $font-size-base;
            color: $color-text-secondary;
        }

        &:hover .form__checkbox-custom {
            border-color: $color-primary;
        }
    }

    // File upload
    &__upload {
        border: 2px dashed $color-border-hover;
        border-radius: $radius-lg;
        transition: all $transition-base;
        overflow: hidden;

        &:hover {
            border-color: $color-primary;
            background: rgba($color-primary, 0.05);
        }

        &.has-file {
            border-style: solid;
            border-color: $color-success;
            background: rgba($color-success, 0.05);
        }

        &-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: $spacing-2;
            padding: $spacing-8;
            cursor: pointer;
        }

        &-icon {
            font-size: 2rem;
        }

        &-text {
            font-size: $font-size-sm;
            color: $color-text-muted;
        }

        &-input {
            display: none;
        }

        &-file {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: $spacing-4 $spacing-6;
        }

        &-filename {
            font-size: $font-size-base;
            color: $color-text-primary;
        }

        &-remove {
            width: 28px;
            height: 28px;
            @include flex-center;
            background: rgba($color-error, 0.2);
            color: $color-error;
            border: none;
            border-radius: 50%;
            font-size: $font-size-sm;
            cursor: pointer;
            transition: all $transition-base;

            &:hover {
                background: $color-error;
                color: white;
            }
        }
    }

    // Submit button
    &__submit {
        @include button-primary;
        width: 100%;
        padding: $spacing-5;
        font-size: $font-size-lg;
        margin-top: $spacing-6;

        svg {
            transition: transform $transition-base;
        }

        &:hover:not(:disabled) svg {
            transform: translateX(4px);
        }

        &:disabled {
            opacity: 0.7;
        }
    }

    &__submit-spinner {
        width: 20px;
        height: 20px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
        margin-right: $spacing-2;
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}